{% extends "dashboard/base.html" %}
{% block title %}GymApp - {{ training_plan.name }}{% endblock %}

{% block content %}
    <div class="inner">
        <h2>{{ training_plan.name }}</h2>
        <ul>
            <li>
                <strong>Last Training:</strong> {{ training_plan.last_training|default:"-" }}
            </li>
            <li>
                <strong>Exercises:</strong>
                {% if training_plan.exercises_info.all %}
                    <ul>
                        {% for exercise_info in training_plan.exercises_info.all %}
                            <li>
                                {{ exercise_info.exercise.name }} - Series: {{ exercise_info.series }}, Reps: {{ exercise_info.reps }}
                                <form method="POST" action="{% url 'delete_exercise_from_plan' exercise_info.pk %}">
                                    {% csrf_token %}
                                    <button type="submit" class="button small">Remove</button>
                                </form>
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p>No exercises added to this training plan yet.</p>
                {% endif %}
            </li>
        </ul>
        <label>
            <a href="{% url 'training_plan_edit' training_plan.pk %}" class='button fit'> Edit </a>
        </label>
        <label>
            <a href="{% url 'training_plans' %}" class='button fit'> Back </a>
        </label>
        <form method="POST" action="{% url 'delete_training_plan' training_plan.pk %}">
            {% csrf_token %}
            <button type="submit" class="button fit">Delete Training Plan</button>
        </form>
    </div>
{% endblock %}
